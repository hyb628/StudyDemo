<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
</head>
<body>
	<script type="text/javascript">
	var str = [],
	    str2 = [],
	    str3 = [];
	for(var k =0;k<2000;k++) {
		str[k] = parseInt(Math.random() * 100);
	}
	str2= str.slice(0); // slice(0) 是拷贝一份副本
	str3 = str2.slice(0);
	
	//总体来说，冒泡排序的效率是较为低下的，在数据量小的情况下可以使用，否则应该选择其他的排序算法。
	// 冒泡排序
	
	function bubbleSort(arr) {
		var temp = null;
		var len = arr.length;
		for (var i =0;i<len-1;i++) {  //外层循环n-1次
			for (var j = 0;j<len-1-i;j++) { //内层每次循环n-1-i次
				if(arr[j]>arr[j+1]){
					temp = arr[j];
					arr[j] = arr[j+1];
					arr[j+1] = temp;
//					console.log(arr);
				}
			}
		}
		return arr;
	}
	console.time('star');
		bubbleSort(str);
	console.timeEnd('star') ; //18345.775ms
//	console.log('冒泡排序：'+bubbleSort(str)); // 输出结果
	
// 冒泡排序优化
	
	function bubbleSort1(arr){        
		var n=arr.length;        
		var temp=null;        
		var flag=false;//设置标志位，初始值为false        
		for(var i=0; i<n-1; i++){            
			for(var j=0; j<n-1-i; j++){                
				if(arr[j]>arr[j+1]){                
					temp=arr[j];                    
					arr[j]=arr[j+1];                    
					arr[j+1]=temp;                    
					flag=true;//只要交换了标识就设为true  
//					console.log(arr)
				}
			}        
			if(flag){//只要交换了位置，flag的值就重新设置为false                
				flag=false;            
			}else{//如果没有交换，说明数组已经排好序，可以结束循环了  
				break;
			}        
		} 
		return arr;    
	}
	console.time('star2');
		bubbleSort1(str2);
	console.timeEnd('star2');
//	console.log('冒泡排序优化：'+bubbleSort1(str2)); // 输出结果
// 改进冒泡优化写法 相对于上面的写法
//	console.log(str3)
	
	function bubbleSort2(arr){        
		var n=arr.length,        
		 	temp,falg;    
		var flag=false;//设置标志位，初始值为false        
		for(var i=0; i<n-1; i++){     
			falg = false; 
			for(var j=0; j<n-1-i; j++){                
				if(arr[j]>arr[j+1]){                
					temp=arr[j];                    
					arr[j]=arr[j+1];                    
					arr[j+1]=temp;                    
					flag=true;//只要交换了标识就设为true  
//					console.log(arr)
				}
			}        
			if(!flag){ return arr;}     
		} 
		return arr;    
	}
	console.time('star3');
	bubbleSort2(str3);
	console.timeEnd('star3');
//	console.log('冒泡排序优化2：'+bubbleSort2(str3)); // 输出结果

	</script>
</body>
</html>